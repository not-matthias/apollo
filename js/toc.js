document.addEventListener("DOMContentLoaded",()=>{let o=new IntersectionObserver(r,{threshold:[0]}),t=[...document.querySelectorAll("section > *")],i=[...document.querySelectorAll(".toc a")];function a(e){for(;e&&!e.matches("h1, h2, h3, h4");)e=e.previousElementSibling;return e?.id}let n=t.reduce((e,t)=>{let n=a(t);if(t.previousHeader=n,n){let t=i.find(e=>decodeURIComponent(e.hash)==="#"+n);e[n]=t}return e},{});t.forEach(e=>o.observe(e));let e;function r(t){e=(e||t).map(e=>t.find(t=>t.target===e.target)||e);for(s of e)s.isIntersecting||n[s.target.previousHeader]?.parentElement.classList.remove("selected","parent");for(s of e)if(s.isIntersecting){let e=n[s.target.previousHeader]?.closest("li");if(e?.classList.add("selected"),e===0[0])continue;let t=e.querySelector("a");for(t&&t.scrollIntoView({block:"nearest",inline:"nearest"});e;)e?.classList.add("parent"),e=e.parentElement.closest("li")}}})